<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		html,
		body,img{
			margin: 0;
			padding: 0;
		}
		.container{
			width: 400px;
			height: 500px;
			position: relative;
			padding: 20px;
		}
		.container .small{
			position: relative;
			width: 100%;
			height: 100%;
		}
		.container .small img{
			width: 100%;
			height: 100%;
		}
		.container .small .filter{
			
			width: 200px;
			height: 200px;
			background: url(images/filter.png) repeat;
			cursor: pointer;
			position: absolute;
			top: 0;
			left: 0;
		}
		.container .big{
			display: none;
			width: 400px;
			height: 500px;
			position: absolute;
			top: 20px;
			right: -500px;
			overflow: hidden;
		}
		.container .big img{
			position: absolute;
			top: 0;
			left: 0;
			width: 800px;
			height: 1000px;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="small">
			<img src="images/girl.jpg" class="gilr">
			<span class="filter"></span>
		</div>
		<div class="big">
			<img src="images/girl.jpg" class="big-girl">
		</div>
	</div>
	<script type="text/javascript" src="js/$.js"></script>
	<script type="text/javascript">
	/*
				 	事件：
				 		鼠标移入移出：控制滤镜和大图显示
				 		鼠标移动： 控制滤镜的位置、大图的位置
				*/
		window.onload = function(){
			var glass = {
				smallWrap: $('.small'),
				bigWrap: $('.big'),
				filter: $('.filter'),
				bigImg: $('.big-girl'),
				//初始化方法
				init:function(){
					this.mousemove();
					this.hover();
				},
				//鼠标移动
				mousemove:function(){
					var that = this;
					this.smallWrap.onmousemove = function(e){
						e = e || window.event;
						var left = e.clientX-20;
						var top = e.clientY-20;
						//处理left和top，做边缘处理（防止越界）
						left = left<100 ? 100 : (left>300) ? 300 : left;
						top = top<100 ? 100 : (top>400) ? 400 : top;
						//改变滤镜位置
						css(that.filter,{
							left: left - 100,
							top: top - 100
						});
						css(that.bigImg,{
							left:-2*(left-100),
							top:-2*(top-100)
						});
					}
				},
				hover: function(){
					var that = this;
					this.smallWrap.onmouseenter = function(){
						show(that.filter);
						show(that.bigWrap);
					}
					this.smallWrap.onmouseleave = function(){
						hide(that.filter);
						hide(that.bigWrap);
					}
					
				}
			}
			glass.init();
		}
	</script>
</body>
</html>